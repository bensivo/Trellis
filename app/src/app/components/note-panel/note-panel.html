<div class="note-panel">
    @if (currentNote(); as note) {
        <div class="section-header">
            <input #notetitle class="app-editable-header" [attr.size]="note.name.length" [value]="note.name" (input)="onInputTitle($event)" (change)="onChangeTitle($event)"/>
            <div class="icons">
                <i class="app-clickable-icon ri-markdown-line" (click)="exportToMarkdown()"></i>
                <i class="app-clickable-icon ri-file-pdf-2-line" (click)="exportToPDF()"></i>
                <i class="app-clickable-icon ri-delete-bin-line" (click)="onClickDeleteNote()"></i>
            </div>
            <!-- <span class="note-type-subtitle">{{ currentTemplate()?.name ?? 'Unknown' }} </span> -->
        </div>


        <div class="note-fields-container">
            @for (field of note.fields; track field.name) {
                <label class="app-label">{{ field.name }}</label>
                <input class="app-input" [value]="field.value" (change)="onFieldChange($index, $event)"/>
            }
        </div>

        <hr/>

        <app-note-text-editor #noteTextEditor [noteId]="note.id"/>
    }
</div>